<h2>Contrat d'intervention technique</h2>
<p>
La société................................. au capital de......................., ayant son siège social<br />
à..............................................., prise en la personne de M.<br />
(fonctions),<br />
Ci-après dénommé le Prestataire,<br />
</p>
<p>
Et<br />
</p>
<p>
La société................................ au capital de.........................., ayant son siège social
à..............................................., prise en la personne de M.<br />
(fonctions),<br />
Ci-après dénommé le Client,<br />
</p>
<p>
Il a été préalablement exposé:
<p>
<h3>Préambule</h3>
<p>
Clause facultative.
Rappeler ici, en quelques lignes, les raisons qui motivent l'accord intervenu. Ceci peut être utile ultérieurement pour l'interprétation du contrat.
Ceci exposé, il a été convenu ce qui suit.
<p>
<p>
<h3>Article 1: objet</h3>
Clause indispensable.

Le présent contrat est un contrat de prestations de conseil ayant pour objet...

Définir aussi précisément que possible la prestation attendue (mission d'étude, expertise, audit, diagnostic, assistance, accompagnement...). Il peut être utile de renvoyer en annexe cette définition, si elle est un peu ample. Utiliser alors une formule du type:
Le présent contrat est un contrat de prestation de conseil ayant pour objet la mission définie au cahier des charges annexé au présent contrat et en faisant partie intégrante.

<h3>Article 2: prix</h3>
Clause indispensable.
Deux possibilités sont offertes. Soit un prix forfaitaire, pour une tâche bien déterminée, dans un calendrier arrêté, prix éventuellement révisable selon un mécanisme d'indexation. Soit un prix "en régie" si la durée de réalisation de la mission ne peut être nettement prévue. Les deux cas pouvant être combinés.

1er exemple: En contrepartie de la réalisation des prestations définies à l'article 1 ci-dessus, le client versera au prestataire la somme forfaitaire de.......... €, ventilée de la manière suivante:
...................... € à la signature des présentes
...................... € au (n) jour suivant la signature des présentes
...................... €, constituant le solde, à la réception de la tâche.
(Si une indexation est opportune, pour les versements intermédiaires et terminaux, il convient de choisir un indice en relation avec l'activité des parties ou l'objet du contrat).

Exemple de formule d'indexation:
P = Po (I/Io)
dans laquelle;
P est le prix après révision
Po est le prix de base
I est l'indice le plus récent
Io est l'indice connu à la date de prise d'effet du contrat.

2e exemple: Les prestations définies à l'article 1 ci-dessus seront facturées au client........... € par journée pour un maximum de............ journées.
Par ailleurs, comme vu également, un surplus raisonnable de rémunération peut être calculée en fonction d'un pourcentage assis sur des éléments quantifiables pour faire participer le prestataire au succès de l'opération. S'ils ne sont pas compris dans le prix ci-dessus, il conviendra en outre que soient prévus les frais de déplacement, séjour et autres du prestataire.

Les frais engagés par le prestataire: de déplacement, d'hébergement, de repas et frais annexes de dactylographie, reprographie etc., nécessaires à l'exécution de la prestation seront facturés en sus au client sur relevé de dépenses.
Les modalités de paiement du prix pourront soit figurer dans la présente clause de prix, soit dans une clause autonome, qui alors, pourra détailler davantage divers éléments.
Les sommes prévues ci-dessus seront payées par chèque, dans les huit jours de la réception de la facture, droits et taxes en sus.

<h3>Article 3: durée</h3>
Clause indispensable. A relier à l'article 5.
Dans le cas d'un prix forfaitaire, il sera souvent nécessaire de prévoir une durée, éventuellement en termes de calendrier. Dans le cas d'un prix en régie, il sera prudent, comme vu ci-dessus, de fixer une borne. La question de la durée en termes de délais sera retrouvée ci-après.

Obligations du prestataire

Article 4: exécution de la prestation
Clause indispensable.
Selon le domaine d'intervention du prestataire (études de marché, communication, logistique...), et selon le degré de précision de la clause d'objet éventuellement renvoyant à un cahier des chrages en annexe, il y a lieu de préciser ici le contenu éventuellement plus précis de la prestation et les modalités d'exécution de celle-ci.
Le prestataire s'engage à mener à bien la tâche précisée à l'article 1, conformément aux règles de l'art et de la meilleure manière.
A cet effet, il constituera l'équipe nécessaire à la réalisation de la mission et remettra, avant le rapport terminal, une pré-étude, au plus tard le...
Il peut être utile d'annexer au contrat la composition de l'équipe dont la modification éventuelle nécessiterait l'accord du client. Il devra solliciter du client tous les éléments nécessaires à la bonne menée de la tâche, éventuellement dans le cadre d'un comité de pilotage qui peut être constitué à cet effet.

<h3>Article 5: calendrier-délais</h3>
Clause indispensable.
Il est important de mettre en place un échéancier-calendrier de l'accomplissement des prestations. Les diverses étapes peuvent d'ailleurs être flottantes et dépendre, par exemple, de l'accomplissement à certains moments de certaines tâches par le client.
Le prestataire craindra parfois de s'engager sur des délais impératifs; le client, pour sa part, aura tout intérêt à les exiger sous diverses sanctions, en termes de pénalités ou de résiliation, qui seront retrouvées ci-après.
La phase 1 définie au cahier des charges annexé aux présentes devra étre achevée au plus tard le...
La phase 2, assortie de la remise du pré-rapport devra étre achevée au plus tard, le...
La phase 3 et le rapport terminal devront étre délivrés au plus tard le...

<h3>Article 6: nature des obligations</h3>
Clause facultative, mais la clause "Exécution de la prestation", article 4 ci-dessus est indispensable.
Il faut préciser que la distinction bien connue, obligation de moyens et obligation de résultat, n'a d'intérêt que sur le terrain de la preuve. Si le prestataire s'est engagé sur des résultats (définis en termes de performances et d'actes positifs dans la clause d'objet), le non-accomplissement du résultat le constitue en faute, à charge pour lui de démontrer la cause étrangère, généralement la faute du partenaire, qui le déchargera de toute responsabilité.
Inversement, si son engagement n'est que de purs moyens comme, par exemple, la stipulation de délais purement indicatifs, le client mécontent de l'exécution de la prestation devra alors démontrer -charge plus lourde- que le prestataire n'a pas donné à la réalisation de sa tâche tous les soins requis.
Une fois encore, tout débat sur ce terrain devrait être évité par la précision suffisante de la clause d'objet, du cahier des charges, sachant néanmois que la pertinence finale des conseils prodigués ne peut ressortir que d'une obligation de moyens. En revanche, la remise des rapports, le fait de venir sur le site, lorsque cela est prévu, et le respect des délais impératifs doivent pouvoir être considérés comme des obligations de résultat.
Pour l'accomplissement des diligences et prestations prévues à l'article 1 ci-dessus, le prestataire s'engage à donner ses meilleurs soins, conformément aux règles de l'art. La présente obligation, n'est, de convention expresse, que pure obligation de moyens.

<h3>Article 7: obligation de confidentialité</h3>
Clause indispensable.
Il est important que le prestataire soit tenu de ne pas divulguer les informations auxquelles il aura pu avoir accès, dans le cadre de l'exécution de sa mission. L'attention du prestataire peut être attirée par la confidentialité des documents en cause, lorsque, notamment, ces derniers sont revêtus de la mention "confidentiel".
Le prestataire considèrera comme strictement confidentiel, et s'interdit de divulguer, toute information, document, donnée ou concept, dont il pourra avoir connaissance à l'occasion du présent contrat. Pour l'application de la présente clause, le prestataire répond de ses salariés comme de lui-même. Le prestataire, toutefois, ne saurait être tenu pour responsable d'aucune divulgation si les éléments divulgués étaient dans le domaine public à la date de la divulgation, ou s'il en avait connaissance, ou les obtenait de tiers par des moyens légitimes.

Obligations du client

<h3>Article 8: obligation de libérer l'accès aux informations</h3>
Clause facultative.
Il peut être utile que le contrat prévoie que, pour mener à bien la mission prise en charge, le prestataire pourra avoir un accès libre à certaines catégories d'informations. Cette clause pourra d'ailleurs être recoupée par la clause suivante.

<h3>Article 9: obligation de collaboration</h3>
Clause facultative.
Dans les divers contrats de conseil, il est clair que le client ne peut pas se borner à un rôle purement passif, et les tribunaux décident qu'il doit faciliter autant que possible la tâche du prestataire. Le client doit donc être disponible, actif et spontané; aussi les prestataires, pour conforter ce point, demandent fréquemment l'insertion de stipulations leur donnant un contact désigné dans l'entreprise cliente, en charge du maintien du dialogue nécessaire.
Comme vu ci-dessus, un comité de pilotage et de suivi peut être constitué, pour concrétiser cette obligation;
Le client tiendra à la disposition du prestataire toutes les informations pouvant contribuer à la bonne réalisation de l'objet du présent contrat. A cette fin, le client désigne deux interlocuteurs privilégiés (MM...), pour assurer le dialogue dans les diverses étapes de la mission contractée.

<h3>Article 10: obligation de réception</h3>
Clause facultative.
La réception est l'acte par lequel le client reconnaît la conformité de la chose délivrée. Dans les contrats de conseil, il ne sera pas souvent prévu qu'un client ait à agréer la prestation accomplie, laquelle se solde la plupart du temps par la remise physique du rapport ou de l'étude, dont il suffira de constater si le travail effectué correspond ou non au cahier des charges.
Néanmoins, pour des projets un peu exploratoires, on comprendra qu'il soit utile que le client donne son acceptation sur le travail fait, à l'issue de certaines étapes, pour que d'autres puissent commencer.
Dans ce dernier cas, la clause de réception est tout à fait utile, d'autant que des paiements seront souvent liés aux réceptions intermédiaires. Le client qui n'aurait pas de grief n'a pas alors de raison de refuser ces réceptions.
A la date du..., le prestataire devra remettre un pré-rapport soumis à la validation expresse du client, pour que la phase suivante de la mission puisse recevoir exécution.

<h3>Article 11: obligation de non-sollicitation de personnel</h3>
Clause facultative.
Le prestataire peut vouloir s'assurer qu'à l'occasion de la mission, le client ne tente pas de débaucher des personnels, qui pourraient lui faire défaut.
Le client s'interdit d'engager, ou de faire travailler d'aucune manière, tout collaborateur présent ou futur du prestataire. La présente clause vaudra, quelle que soit la spécialisation du collaborateur en cause, et même dans l'hypothèse ou la sollicitation serait à l'initiative dudit collaborateur. La présente clause développera ses effets pendant toute l'exécution du présent contrat, et pendant deux ans à compter de sa terminaison.

Jouissance des résultats de l'étude

<h3>Article 12: propriété des résultats</h3>
Clause indispensable.
Il est nécessaire de préciser la manière dont les résultats d'une mission pourront être utilisés par les parties.
Cette préoccupation figure généralement dans les clauses des contrats sous l'intitulé de "propriété des résultats", mais n'a de sens, en termes de propriété, que lorsque les résultats de l'étude sont concrétisés dans une forme protégeable, par droit d'auteur (mais les idées sont utilisables librement), voire par brevet d'invention. Hors de ces cas-là, les résultats d'une mission ne sont souvent que des méthodes, ou éléments de savoir-faire, non protégeables par le droit à la propriété intellectuelle, mais réservables en termes d'obligations.
Si lesdits résultats de l'étude sont objets de droit d'auteur, il conviendra que les parties décident qui aura le droit d'auteur sur l'oeuvre réalisée: le client ayant tout intérêt à se faire céder, de la manière la plus large les droits de reproduction, de représentation, de commercialisation des "oeuvres" réalisées pour son compte, et la transmission de la propriété est au prix d'une clause explicite sur les diverses prérogatives transférées.
Si le client n'obtient pas la propriété de "l'oeuvre", il pourra sans doute en tirer le profit d'information, mais ne pourra pas reproduire et commercialiser les documents qui la supporte.
Dans le cas plus probable ou le résultat de la mission ne peut pas être considéré comme une oeuvre (ou une invention brevetable), la question de sa propriété n'a pas véritablement de sens. Il convient alors que les parties s'expliquent sur l'usage limité ou large que le client pourra faire de l'information donnée, et sur la possibilité, nulle, limitée ou large que le prestataire, pour sa part, pourrait en faire.
C'est pourquoi, on trouve parfois des clauses de "réserve de propriété" des éudes jusqu'au complet paiement du prix, qui ne semblent pas pouvoir, concrètement, avoir des effets, spécialement au sens du droit de la faillite.

De convention expresse, les résultats de l'étude seront en la pleine maîtrise du client, à compter du paiement intégral de la prestation et le client pourra en disposer comme il l'entend. Le prestataire, pour sa part, s'interdit de faire état des résultats dont il s'agit et de les utiliser de quelque manière, sauf à obtenir préalablement l'autorisation écrite du client.

Autre exemple, si l'on pouvait admettre que le résultat de l'étude, très formalisé, réponde aux exigences du droit d'auteur et constitue dès lors une oeuvre:

De convention expresse, la propriété de l'oeuvre, réalisée en application du présent contrat, est attribuée au client. A cette fin, et en tant que de besoin, le prestataire transfère au client tous les droits sur l'oeuvre précitée: droit de reproduction, droit de représentation, droit de commercialisation, droit d'usage, de détention, d'adaptation, de traduction, et plus généralement, tous droits d'exploitation.
La présente cession vaut pour tous territoires et pour toute la durée de protection dont l'oeuvre fait l'objet. Le prestataire s'interdit pour l'avenir tout fait d'exploitation de l'oeuvre précitée. De convention expresse, le client acquiert la propriété de l'oeuvre dont il s'agit, au fur et à mesure de son élaboration.

<h3>Article 13: garantie</h3>
Clause facultative.
Il faut ajouter qu'il est utile que le client soit bien protégé, dans le cas ou le prestataire lui fournirait, volontairement ou non, des éléments d'informations sur lesquels ledit prestataire ne disposerait pas d'un libre usage.
Le prestatataire garantit le client contre toute revendication de tiers alléguée à l'encontre du client et concernant les éléments, ou informations, fournis par le prestataire au client.

<h3>Article 14: responsabilités</h3>
Clause facultative.
Le prestataire souhaitera atténuer, ou éluder, sa responsabilité en cas d'insatisfaction objective du client. On notera que dans ces contrats, les clauses limitatives ou suppressives de responsabilité sont licites dans la mesure où le préjudice que subirait le client n'est pas causé par une faute intentionnelle ou lourde du prestataire.
Le client convient que, quels que soient les fondements de sa réclamation, et la procédure suivie pour la mettre en oeuvre, la responsabilité éventuelle du prestataire à raison de l'exécution des obligations prévues au présent contrat, sera limitée à un montant n'excédant pas la somme totale effectivement payée par le client, pour les services ou tâches fournis par le prestataire.
Par ailleurs, le client renonce à rechercher la responsabilité du prestataire en cas de dommages survenus aux fichiers, ou tout document qu'il lui aurait confié.
Le prestataire dégage sa responsabilité à l'égard des dommages matériels pouvant atteindre les immeubles, installations, matériels, mobiliers du client.
Le client convient que le prestataire n'encourra aucune responsabilité à raison de toute perte de bénéfices, de trouble commercial, de demandes que le client subirait; de demandes ou de réclamations formulées contre le client et émanant d'un tiers quel qu'il soit.

On notera que la dernière phrase ici donne une solution différente au contenu de l'article 13 ci-dessus.

<h3>Article 15: pénalités</h3>
Clause facultative.
Il est parfois important, parfois non, pour le client, d'insérer au contrat des pénalités, pour garantir l'exécution souhaitée, spécialement pour contraindre le prestataire au respect des délais stipulés lorsque ce respect des délais est déterminant pour le client.
Toute méconnaissance des délais stipulés à l'article 5 ci-dessus, engendrera l'obligation pour le prestataire de payer au client la somme de.......... €, par jour de retard.

<h3>Article 16: résiliation-sanction</h3>
Clause utile dans les contrats prévoyant l'élaboration d'une tâche très précise ou devant se développer dans une durée déterminée.
Il est important pour les partenaires qu'un article du contrat permette au créancier d'une obligation inexécutée de mettre fin à la relation, en dehors du pouvoir d'appréciation des tribunaux que l'article 1184 du Code civil leur reconnaît.
Cette clause, néanmoins, ne doit pas servir de prétexte à un partenaire de mauvaise foi pour se débarrasser de l'autre en cas de manquement minime.

Toute manquement de l'une ou l'autre des parties aux obligations qu'elle a en charge, aux termes des articles (...), (...), ci-dessus, (articles importants) entraînera, si bon semble au créancier de l'obligation inexécutée, la résiliation de plein droit au présent contrat, quinze jours après mise en demeure d'exécuter par lettre recommandée avec accusé de réception demeurée sans effet, sans préjudice de tous dommages et intérêts.
Cette clause peut "indexer", notamment, la clause de paiement du prix, voire la clause imposant des délais d'exécution indépendamment des pénalités de retard qui auront été prévues.

<h3>Article 17: résiliation hors faute</h3>
Clause facultative.
Toujours dans le cas où le contrat n'aurait pas un objet ferme, entendu comme la réalisation d'une tâche précisée, ou une durée déterminée, ce qui revient à peu près au même, les parties peuvent dans ces situations mettre fin unilatéralement au contrat, éventuellement sous réserve d'un préavis, si une certaine incompatibilité de vue venait à se manifester.
Le présent contrat pourra être résilié à tout instant par chacune des parties, sous la réserve d'un préavis de trois semaines.
Dans cette hypothèse, les sommes déjà perçues par le prestataire lui demeureraient acquises et le client pourrait faire l'usage le plus libre des informations qui lui auraient été communiquées, ou des documents d'ores et déjà remis.
Dans le cas inverse, qui serait celui de l'article 16 ci-dessus, c'est-à-dire où les parties devraient aller au terme de l'objectif dessiné, ou respecter la durée prévue au contrat, il peut être utile de prévoir une porte de sortie, si certaines circonstances rendaient la poursuite de l'exécution plus lourde pour l'une d'entre elles. Par exemple, si tel personnel compétent venait à disparaître, ou à quitter l'entreprise prestataire.
Le présent contrat sera résilié de plein droit, si bon semble au prestataire, un mois après avertissement adéquat adressé au partenaire, dans le cas où M...... viendrait à quitter l'entreprise du prestataire, sans que ce fait soit imputable à ce dernier. Dans la mesure du possible, les lots ou étapes commencés seront terminés.

<h3>Article 18: sous-traitance</h3>
Clause facultative.
Les contrats de conseil sont bien évidemment conclus, du côté du client, en considération du profil et des compétences du partenaire.
On comprend, dès lors, que le client ne souhaite pas nécessairement voir une tierce entreprise s'associer à tout ou partie de l'exécution de la prestation. D'un autre côté, le prestataire peut avoir nécessité de se décharger partiellement sur un tiers de parties de prestations, sur lesquelles il disposerait d'un moindre savoir-faire.
De la négociation doit donc résulter la construction de la clause, dans un sens permissif, prohibitif ou moyennement permissif, sous agrément préalable du client.

Les tâches précisées à l'article 1 ne seront pour ce qui concerne les phases (..., ...), pas prises en charges par le prestataire, mais seront exécutées par la société......, en sous-traitance, ce que reconnaît et accepte le client.
Le prestataire s'interdit de sous-traiter à quiconque la réalisation des travaux définis à l'article 1.

<h3>Article 19: cession de contrat</h3>
Clause facultative.
La même idée gouverne la possibilité, pour l'un ou l'autre des partenaires, non pas de s'associer un tiers, mais de se le substituer, dans la poursuite de l'exécution. Les solutions contractuelles pourront être, de la même manière, diverses.
Le présent contrat est conclu en considération de la personne du prestataire, qui ne pourra substituer de tiers dans la réalisation de la tâche ci-dessus définie.

<h3>Article 20: référencement</h3>
Clause facultative.
Il arrive que les parties ne souhaitent pas faire savoir qu'elles ont contracté entre elles, et il peut alors être stipulé une clause de confidentialité du contrat, voire de l'affaire conclue.
Néanmoins, dans bien des cas, surtout si la prestation est satisfaisante, le prestataire pourra désirer faire état du fait d'avoir travaillé pour le client. Il sera utile qu'une clause le permette clairement.
Le client accepte que le prestataire puisse faire figurer parmi ses références les travaux accomplis dans le cadre du présent contrat.

<h3>Article 21: interprétation du contrat</h3>
Clause facultative.
On rencontre souvent dans les conventions des dispositions par lesquelles le prestataire ne souhaite s'engager que sur le contenu du document terminal signé, en excluant tous éléments ou engagements évoqués au cours des pourparlers. Ceci porte parfois le nom de "clause des quatre coins".
Le présent contrat et ses annexes contiennent tous les engagements des parties, et les correspondances, offres ou propositions antérieures à la signature des présentes, sont considérées comme non-avenues.
Il convient d'insister sur l'importance de la clarté dans la rédaction des clauses d'un contrat qui constituent la mesure des engagements réciproques. En cas de maladresses, c'est aux tribunaux qu'il revient d'interpréter les dispositions obscures, conformément aux indications suggérées par les articles 1156 et suivants du Code civil. On a vu qu'un préambule un peu nourri permettait de dissiper les équivoques.

<h3>Article 22: médiation</h3>
Clause facultative.
En cas de différend, toute formule amiable susceptible de l'aplanir, avant contentieux judiciaire, sera bienvenue. Pour un contrat d'une certaine ampleur, on pourrait proposer la disposition suivante.
Les parties s'engagent à tenter de résoudre à l'amiable tout différend susceptible d'intervenir entre elles, à l'occasion du présent contrat, sur la médiation de M......., qui, saisi à l'initiative de la partie la plus diligente, formulera une proposition de conciliation, dans le mois suivant sa saisine. Les frais de médiation seront supportés par moitié, par chacune des parties.

<h3>Article 23: juridiction compétente</h3>
Clause facultative.
Si les parties sont toutes commerçantes, elles ont la possibilité d'avoir décidé, par avance, la juridiction de tel lieu déterminé qui tranchera leur différend: ceci n'ayant de sens que dans la mesure où prestataire et client seront chacun dans un ressort judiciaire de tribunal de commerce différent.
Tout litige susceptible de s'élever entre les parties, à propos de la formation, de l'exécution, ou de l'interprétation du présent contrat, sera de la compétence exclusive du tribunal de commerce de........
A défaut, les règles de la procédure civile décideront normalement que le demandeur au procès doit saisir le tribunal du lieu du partenaire à qui il cherche querelle.

<h3>Article 24: arbitrage</h3>
Plutôt que d'aller vers les juridictions judiciaires, les parties peuvent, par une clause du contrat, s'être engagées à saisir un arbitre. La formule d'arbitrage n'est sans doute pas à recommander pour des contrats de petite ou moyenne importance. En revanche, pour des opérations complexes, et éventuellement dans une perspective de confidentialité, les parties pourront prévoir une clause d'arbitrage. Cette clause, elle aussi, n'est valable qu'entre personnes commerçantes et doit être suffisamment précise pour pouvoir prendre ses effets. Certains organismes d'arbitrage sont institués, et dans ce cas, il suffit que les parties se réfèrent à leur règlement.

Tout litige susceptible de s'élever entre les parties sera tranché conformément au règlement de conciliation et d'arbitrage de l'institution.......

Si les parties veulent un arbitrage non-institutionnel, la clause doit être plus précise.
Tout litige suceptible de survenir entre les parties, quant à la formation, l'exécution, ou à l'occasion du présent contrat, sera soumis, à l'initiative de la partie la plus diligente, à une juridiction arbitrale, composée de trois personnes. A cette fin, chaque partie désignera son propre arbitre. Celle qui prendra l'initiative de la procédure faisant connaître à l'autre partie par lettre recommandée A.R. le nom de l'arbitre choisi; l'autre partie faisant connaître à la première, dans les quinze jours de la réception de la lettre, dans les mêmes formes, le nom du second arbitre choisi. En cas de défaut de désignation du second arbitre, dans le délai susvisé, la partie qui aura pris l'initiative de l'arbitrage en demandera la désignation à Monsieur le président du tribunal de commerce de......, statuant sur simple requête. Les deux arbitres désignés dans les quinze jours de leur saisine commune s'accorderont sur la désignation du troisième. A défaut d'entente entre les deux arbitres, le troisième sera désigné par ordonnance du président de la juridiction précitée, à la requête de la partie la plus diligente. Le collège arbitral statuera, à charge d'appel, conformément aux dispositions du nouveau code de procédure civile.

On ajoutera, pour être complet, que si le contrat est international (client faisant appel par exemple à un prestataire étranger), il sera utile de préciser dans la convention la loi choisie pour gouverner les différends: loi française ou loi étrangère.
<p>
Fait à.......................... <br />
Le............................... <br />
En double exemplaire,<br /><br />

Signature du client : <br />
</p>
<div>
<div id="content">
	<div id="signatureparent">
		<div>jSignature inherits colors from parent element. Text = Pen color. Background = Background. (This works even when Flash-based Canvas emulation is used.)</div>
		<div id="signature"></div></div>
	<div id="tools"></div>
	<div><p>Display Area:</p><div id="displayarea"></div></div>
</div>
<div id="scrollgrabber"></div>
</div>

{literal}
<script>
$(document).ready(function() {

	// This is the part where jSignature is initialized.
	var $sigdiv = $("#signature").jSignature({'UndoButton':true})

	// All the code below is just code driving the demo.
	, $tools = $('#tools')
	, $extraarea = $('#displayarea')
	, pubsubprefix = 'jSignature.demo.'

	var export_plugins = $sigdiv.jSignature('listPlugins','export')
	, chops = ['<span><b>Extract signature data as: </b></span><select>','<option value="">(select export format)</option>']
	, name
	for(var i in export_plugins){
		if (export_plugins.hasOwnProperty(i)){
			name = export_plugins[i]
			chops.push('<option value="' + name + '">' + name + '</option>')
		}
	}
	chops.push('</select><span><b> or: </b></span>')

	$(chops.join('')).bind('change', function(e){
		if (e.target.value !== ''){
			var data = $sigdiv.jSignature('getData', e.target.value)
			$.publish(pubsubprefix + 'formatchanged')
			if (typeof data === 'string'){
				$('textarea', $tools).val(data)
			} else if($.isArray(data) && data.length === 2){
				$('textarea', $tools).val(data.join(','))
				$.publish(pubsubprefix + data[0], data);
			} else {
				try {
					$('textarea', $tools).val(JSON.stringify(data))
				} catch (ex) {
					$('textarea', $tools).val('Not sure how to stringify this, likely binary, format.')
				}
			}
		}
	}).appendTo($tools)


	$('<input type="button" value="Reset">').bind('click', function(e){
		$sigdiv.jSignature('reset')
	}).appendTo($tools)

	$('<div><textarea style="width:100%;height:7em;"></textarea></div>').appendTo($tools)

	$.subscribe(pubsubprefix + 'formatchanged', function(){
		$extraarea.html('')
	})

	$.subscribe(pubsubprefix + 'image/svg+xml', function(data) {

		try{
			var i = new Image()
			i.src = 'data:' + data[0] + ';base64,' + btoa( data[1] )
			$(i).appendTo($extraarea)
		} catch (ex) {

		}

		var message = [
			"If you don't see an image immediately above, it means your browser is unable to display in-line (data-url-formatted) SVG."
			, "This is NOT an issue with jSignature, as we can export proper SVG document regardless of browser's ability to display it."
			, "Try this page in a modern browser to see the SVG on the page, or export data as plain SVG, save to disk as text file and view in any SVG-capabale viewer."
           ]
		$( "<div>" + message.join("<br/>") + "</div>" ).appendTo( $extraarea )
	});

	$.subscribe(pubsubprefix + 'image/svg+xml;base64', function(data) {
		var i = new Image()
		i.src = 'data:' + data[0] + ',' + data[1]
		$(i).appendTo($extraarea)

		var message = [
			"If you don't see an image immediately above, it means your browser is unable to display in-line (data-url-formatted) SVG."
			, "This is NOT an issue with jSignature, as we can export proper SVG document regardless of browser's ability to display it."
			, "Try this page in a modern browser to see the SVG on the page, or export data as plain SVG, save to disk as text file and view in any SVG-capabale viewer."
           ]
		$( "<div>" + message.join("<br/>") + "</div>" ).appendTo( $extraarea )
	});

	$.subscribe(pubsubprefix + 'image/png;base64', function(data) {
		var i = new Image()
		i.src = 'data:' + data[0] + ',' + data[1]
		$('<span><b>As you can see, one of the problems of "image" extraction (besides not working on some old Androids, elsewhere) is that it extracts A LOT OF DATA and includes all the decoration that is not part of the signature.</b></span>').appendTo($extraarea)
		$(i).appendTo($extraarea)
	});

	$.subscribe(pubsubprefix + 'image/jsignature;base30', function(data) {
		$('<span><b>This is a vector format not natively render-able by browsers. Format is a compressed "movement coordinates arrays" structure tuned for use server-side. The bonus of this format is its tiny storage footprint and ease of deriving rendering instructions in programmatic, iterative manner.</b></span>').appendTo($extraarea)
	});

	if (Modernizr.touch){
		$('#scrollgrabber').height($('#content').height())
	}

})
</script>
{/literal}
